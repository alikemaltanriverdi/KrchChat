!function(b){b.fn.scwStickySidebar=function(i){function t(i,t){return!0===i.initialized||!(b("body").width()<i.minWidth)&&(t=t,(p=i).initialized=!0,0===b("#scw-sticky-sidebar-stylesheet-"+p.namespace).length&&b("head").append(b('<style id="scw-sticky-sidebar-stylesheet-'+p.namespace+'">.scwStickySidebar:after {content: ""; display: table; clear: both;}</style>')),t.each(function(){function l(){s.fixedScrollTop=0,s.sidebar.css({"min-height":"1px"}),s.stickySidebar.css({position:"static",width:"",transform:"none"})}var e,i,t,o,s={},n=(s.sidebar=b(this),s.options=p||{},s.container=b(s.options.containerSelector),0==s.container.length&&(s.container=s.sidebar.parent()),s.sidebar.parents().css("-webkit-transform","none"),s.sidebar.css({position:s.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),s.stickySidebar=s.sidebar.find(".scwStickySidebar"),0==s.stickySidebar.length&&(e=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i,s.sidebar.find("script").filter(function(i,t){return 0===t.type.length||t.type.match(e)}).remove(),s.stickySidebar=b("<div>").addClass("scwStickySidebar").append(s.sidebar.children()),s.sidebar.append(s.stickySidebar)),s.marginBottom=parseInt(s.sidebar.css("margin-bottom")),s.paddingTop=parseInt(s.sidebar.css("padding-top")),s.paddingBottom=parseInt(s.sidebar.css("padding-bottom")),s.stickySidebar.offset().top),d=s.stickySidebar.outerHeight();s.stickySidebar.css("padding-top",1),s.stickySidebar.css("padding-bottom",1),n-=s.stickySidebar.offset().top,d=s.stickySidebar.outerHeight()-d-n,0==n?(s.stickySidebar.css("padding-top",0),s.stickySidebarPaddingTop=0):s.stickySidebarPaddingTop=1,0==d?(s.stickySidebar.css("padding-bottom",0),s.stickySidebarPaddingBottom=0):s.stickySidebarPaddingBottom=1,s.previousScrollTop=null,s.fixedScrollTop=0,l(),s.onScroll=function(i){if(i.stickySidebar.is(":visible"))if(b("body").width()<i.options.minWidth)l();else{if(i.options.disableOnResponsiveLayouts)if(i.sidebar.outerWidth("none"==i.sidebar.css("float"))+50>i.container.width())return void l();var t,e,o,s,n,d=b(document).scrollTop(),a="static";d>=i.sidebar.offset().top+(i.paddingTop-i.options.additionalMarginTop)&&(e=i.paddingTop+p.additionalMarginTop,s=i.paddingBottom+i.marginBottom+p.additionalMarginBottom,n=i.sidebar.offset().top,r=i.sidebar.offset().top+(r=i.container,c=r.height(),r.children().each(function(){c=Math.max(c,b(this).height())}),c),t=0+p.additionalMarginTop,e=i.stickySidebar.outerHeight()+e+s<b(window).height()?t+i.stickySidebar.outerHeight():b(window).height()-i.marginBottom-i.paddingBottom-p.additionalMarginBottom,s=n-d+i.paddingTop,n=r-d-i.paddingBottom-i.marginBottom,r=i.stickySidebar.offset().top-d,o=i.previousScrollTop-d,"fixed"==i.stickySidebar.css("position")&&"modern"==i.options.sidebarBehavior&&(r+=o),"stick-to-top"==i.options.sidebarBehavior&&(r=p.additionalMarginTop),"stick-to-bottom"==i.options.sidebarBehavior&&(r=e-i.stickySidebar.outerHeight()),r=0<o?Math.min(r,t):Math.max(r,e-i.stickySidebar.outerHeight()),r=Math.max(r,s),r=Math.min(r,n-i.stickySidebar.outerHeight()),a=!(o=i.container.height()==i.stickySidebar.outerHeight())&&r==t||!o&&r==e-i.stickySidebar.outerHeight()?"fixed":d+r-i.sidebar.offset().top-i.paddingTop<=p.additionalMarginTop?"static":"absolute"),"fixed"==a?(s=b(document).scrollLeft(),i.stickySidebar.css({position:"fixed",width:h(i.stickySidebar)+"px",transform:"translateY("+r+"px)",left:i.sidebar.offset().left+parseInt(i.sidebar.css("padding-left"))-s+"px",top:"0px"})):"absolute"==a?(n={},"absolute"!=i.stickySidebar.css("position")&&(n.position="absolute",n.transform="translateY("+(d+r-i.sidebar.offset().top-i.stickySidebarPaddingTop-i.stickySidebarPaddingBottom)+"px)",n.top="0px"),n.width=h(i.stickySidebar)+"px",n.left="",i.stickySidebar.css(n)):"static"==a&&l(),"static"!=a&&1==i.options.updateSidebarHeight&&i.sidebar.css({"min-height":i.stickySidebar.outerHeight()+i.stickySidebar.offset().top-i.sidebar.offset().top+i.paddingBottom}),i.previousScrollTop=d}var r,c},s.onScroll(s),b(document).on("scroll."+s.options.namespace,(o=s,function(){o.onScroll(o)})),b(window).on("resize."+s.options.namespace,(t=s,function(){t.stickySidebar.css({position:"static"}),t.onScroll(t)})),"undefined"!=typeof ResizeSensor&&new ResizeSensor(s.stickySidebar[0],(i=s,function(){i.onScroll(i)}))}),!0);var p}function h(i){var t;try{t=i[0].getBoundingClientRect().width}catch(i){}return t=void 0===t?i.width():t}var e,o,s,n,d;return(i=b.extend({containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS"},i)).additionalMarginTop=parseInt(i.additionalMarginTop)||0,i.additionalMarginBottom=parseInt(i.additionalMarginBottom)||0,t(i=i,e=this)||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),b(document).on("scroll."+i.namespace,(n=i,d=e,function(i){t(n,d)&&b(this).unbind(i)})),b(window).on("resize."+i.namespace,(o=i,s=e,function(i){t(o,s)&&b(this).unbind(i)}))),this}}(jQuery),function(){function a(e,i){function p(){var i,t;this.q=[],this.add=function(i){this.q.push(i)},this.call=function(){for(i=0,t=this.q.length;i<t;i++)this.q[i].call()}}function t(i,t){if(i.resizedAttached){if(i.resizedAttached)return i.resizedAttached.add(t)}else i.resizedAttached=new p,i.resizedAttached.add(t);i.resizeSensor=document.createElement("div"),i.resizeSensor.className="resize-sensor";var t="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",e="position: absolute; left: 0; top: 0; transition: 0s;";i.resizeSensor.style.cssText=t,i.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+t+'"><div style="'+e+'"></div></div><div class="resize-sensor-shrink" style="'+t+'"><div style="'+e+' width: 200%; height: 200%"></div></div>',i.appendChild(i.resizeSensor),{fixed:1,absolute:1}[t="position",(e=i).currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]]||(i.style.position="relative");function o(){c.style.width=r.offsetWidth+10+"px",c.style.height=r.offsetHeight+10+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,d=i.offsetWidth,a=i.offsetHeight}function s(i,t,e){i.attachEvent?i.attachEvent("on"+t,e):i.addEventListener(t,e)}function n(){i.offsetWidth==d&&i.offsetHeight==a||i.resizedAttached&&i.resizedAttached.call(),o()}var d,a,r=i.resizeSensor.childNodes[0],c=r.childNodes[0],l=i.resizeSensor.childNodes[1];l.childNodes[0],o();s(r,"scroll",n),s(l,"scroll",n)}var o=Object.prototype.toString.call(e),s="[object Array]"===o||"[object NodeList]"===o||"[object HTMLCollection]"===o||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements;if(s)for(var n=0,d=e.length;n<d;n++)t(e[n],i);else t(e,i);this.detach=function(){if(s)for(var i=0,t=e.length;i<t;i++)a.detach(e[i]);else a.detach(e)}}a.detach=function(i){i.resizeSensor&&(i.removeChild(i.resizeSensor),delete i.resizeSensor,delete i.resizedAttached)},"undefined"!=typeof module&&void 0!==module.exports?module.exports=a:window.ResizeSensor=a}();