!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).LazyLoad=t()}(this,function(){"use strict";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function r(e){return t({},te,e)}function e(e,t){var n,a="LazyLoad::Initialized",t=new e(t);try{n=new CustomEvent(a,{detail:{instance:t}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:t})}window.dispatchEvent(n)}function c(e,t){return e.getAttribute(le+t)}function u(e){return h(e)===re}function d(e){return e.llTempImage}function j(e,t){e&&(e.toLoadCount=t)}function D(e){for(var t,n=[],a=0;t=e.children[a];a+=1)"SOURCE"===t.tagName&&n.push(t);return n}function H(e,t){D(e).forEach(t)}function V(e){delete e[v]}function n(t,e){var n;M(t)||(n={},e.forEach(function(e){n[e]=t.getAttribute(e)}),t[v]=n)}function f(a,e){var o;M(a)&&(o=de(a),e.forEach(function(e){var t,n;t=a,(n=o[e=e])?t.setAttribute(e,n):t.removeAttribute(e)}))}function F(e,t,n){w(e,t.class_applied),E(e,ie),n&&(t.unobserve_completed&&L(e,t),k(t.callback_applied,e,n))}function B(e,t,n){w(e,t.class_loading),E(e,m),n&&(O(n,1),k(t.callback_loading,e,n))}function a(e,t,n){n&&e.setAttribute(t,n)}function J(e,t){a(e,b,c(e,t.data_sizes)),a(e,i,c(e,t.data_srcset)),a(e,g,c(e,t.data_src))}function P(e,t){!t||0<t.loadingCount||0<t.toLoadCount||k(e.callback_finish,t)}function S(e,t,n){e.addEventListener(t,n),e.llEvLisnrs[t]=n}function U(e,t,n){delete e.llTempImage,O(n,-1),n&&--n.toLoadCount,A(e,t.class_loading),t.unobserve_completed&&L(e,n)}function s(r,l,c){var e,t,s=d(r)||r;z(s)||(z(e=s)||(e.llEvLisnrs={}),t="VIDEO"===e.tagName?"loadeddata":"load",S(e,t,function(e){var t=0,n=r,a=l,o=c,i=u(n);U(n,a,o),w(n,a.class_loaded),E(n,oe),k(a.callback_loaded,n,o),i||P(a,o),T(s)}),S(e,"error",function(e){var t=0,n=r,a=l,o=c,i=u(n);U(n,a,o),w(n,a.class_error),E(n,p),k(a.callback_error,n,o),a.restore_on_error&&f(n,N),i||P(a,o),T(s)}))}function $(e){return e.use_native&&"loading"in HTMLImageElement.prototype}function q(e,s,u){e.forEach(function(e){return e.isIntersecting||0<e.intersectionRatio?(o=e.target,i=e,r=s,l=u,c=0<=ce.indexOf(h(o)),E(o,"entered"),w(o,r.class_entered),A(o,r.class_exited),r.unobserve_entered&&L(o,l),k(r.callback_enter,o,i,l),void(c||R(o,r,l))):(i=e.target,c=e,o=s,r=u,void(y(i)||(w(i,o.class_exited),l=i,e=c,n=r,(t=o).cancel_on_exit&&h(l)===m&&"IMG"===l.tagName&&(T(l),x(a=l,function(e){be(e)}),be(a),ve(l),A(l,t.class_loading),O(n,-1),I(l),k(t.callback_cancel,l,e,n)),k(o.callback_exit,i,c,r))));var t,n,a,o,i,r,l,c})}function K(e){return Array.prototype.slice.call(e)}function l(e){return e.container.querySelectorAll(e.elements_selector)}function Q(e){return h(e)===p}function W(e,t){return e=e||l(t),K(e).filter(y)}function o(e,t){var a,o,n,i,e=r(e);this._settings=e,this.loadingCount=0,n=e,i=this,Y&&!$(n)&&(i._observer=new IntersectionObserver(function(e){q(e,n,i)},{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"})),a=e,o=this,_&&(o._onlineHandler=function(){var t,e,n;e=o,n=l(t=a),K(n).filter(Q).forEach(function(e){A(e,t.class_error),I(e)}),e.update()},window.addEventListener("online",o._onlineHandler)),this.update(t)}var _="undefined"!=typeof window,X=_&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Y=_&&"IntersectionObserver"in window,Z=_&&"classList"in document.createElement("p"),ee=_&&1<window.devicePixelRatio,te={elements_selector:".lazy",container:X||_?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},g="src",i="srcset",b="sizes",ne="poster",v="llOriginalAttrs",ae="data",m="loading",oe="loaded",ie="applied",p="error",re="native",le="data-",h=function(e){return c(e,"ll-status")},E=function(e,t){var n;e=e,n="data-ll-status",null!==t?e.setAttribute(n,t):e.removeAttribute(n)},I=function(e){return E(e,null)},y=function(e){return null===h(e)},ce=[m,oe,ie,p],k=function(e,t,n,a){e&&(void 0===a?void 0===n?e(t):e(t,n):e(t,n,a))},w=function(e,t){Z?e.classList.add(t):e.className+=(e.className?" ":"")+t},A=function(e,t){Z?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},L=function(e,t){t&&(t=t._observer)&&t.unobserve(e)},O=function(e,t){e&&(e.loadingCount+=t)},x=function(e,t){e=e.parentNode;e&&"PICTURE"===e.tagName&&D(e).forEach(t)},C=[g],se=[g,ne],N=[g,i,b],ue=[ae],M=function(e){return!!e[v]},de=function(e){return e[v]},fe={IMG:function(e,t){x(e,function(e){n(e,N),J(e,t)}),n(e,N),J(e,t)},IFRAME:function(e,t){n(e,C),a(e,g,c(e,t.data_src))},VIDEO:function(e,t){H(e,function(e){n(e,C),a(e,g,c(e,t.data_src))}),n(e,se),a(e,ne,c(e,t.data_poster)),a(e,g,c(e,t.data_src)),e.load()},OBJECT:function(e,t){n(e,ue),a(e,ae,c(e,t.data_src))}},_e=["IMG","IFRAME","VIDEO","OBJECT"],ge=function(e,t,n){e.removeEventListener(t,n)},z=function(e){return!!e.llEvLisnrs},T=function(e){if(z(e)){var t,n=e.llEvLisnrs;for(t in n){var a=n[t];ge(e,t,a)}delete e.llEvLisnrs}},R=function(e,t,n){var a,o,i,r,l;-1<_e.indexOf(e.tagName)?(s(i=e,a=t,l=n),a=a,l=l,(o=fe[(i=i).tagName])&&(o(i,a),B(i,a,l))):(o=t,i=n,(a=e).llTempImage=document.createElement("IMG"),s(a,o,i),M(l=a)||(l[v]={backgroundImage:l.style.backgroundImage}),l=i,e=c(t=a,(n=o).data_bg),r=c(t,n.data_bg_hidpi),(r=ee&&r?r:e)&&(t.style.backgroundImage='url("'.concat(r,'")'),d(t).setAttribute(g,r),B(t,n,l)),e=i,n=c(r=a,(t=o).data_bg_multi),l=c(r,t.data_bg_multi_hidpi),(l=ee&&l?l:n)&&(r.style.backgroundImage=l,F(r,t,e)),n=i,(t=c(l=a,(r=o).data_bg_set))&&(e=(t=t.split("|")).map(function(e){return"image-set(".concat(e,")")}),l.style.backgroundImage=e.join(),""===l.style.backgroundImage&&(e=t.map(function(e){return"-webkit-image-set(".concat(e,")")}),l.style.backgroundImage=e.join()),F(l,r,n)))},be=function(e){e.removeAttribute(g),e.removeAttribute(i),e.removeAttribute(b)},ve=function(e){x(e,function(e){f(e,N)}),f(e,N)},me={IMG:ve,IFRAME:function(e){f(e,C)},VIDEO:function(e){H(e,function(e){f(e,C)}),f(e,se),e.load()},OBJECT:function(e){f(e,ue)}},pe=["IMG","IFRAME","VIDEO"];if(o.prototype={update:function(e){var t,n,a,o,i=this._settings,e=W(e,i);j(this,e.length),!X&&Y?$(i)?(a=i,o=this,e.forEach(function(e){var t,n;-1!==pe.indexOf(e.tagName)&&(t=a,n=o,(e=e).setAttribute("loading","lazy"),s(e,t,n),(n=fe[e.tagName])&&n(e,t),E(e,re))}),j(o,0)):(i=e,(t=this._observer).disconnect(),n=t,i.forEach(function(e){n.observe(e)})):this.loadAll(e)},destroy:function(){this._observer&&this._observer.disconnect(),_&&window.removeEventListener("online",this._onlineHandler),l(this._settings).forEach(function(e){V(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,n=this._settings;W(e,n).forEach(function(e){L(e,t),R(e,n,t)})},restoreAll:function(){var o=this._settings;l(o).forEach(function(e){var t,n,a;t=o,(a=me[(n=e=e).tagName])?a(n):M(a=n)&&(n=de(a),a.style.backgroundImage=n.backgroundImage),a=t,y(n=e)||u(n)||(A(n,a.class_entered),A(n,a.class_exited),A(n,a.class_applied),A(n,a.class_loading),A(n,a.class_loaded),A(n,a.class_error)),I(e),V(e)})}},o.load=function(e,t){t=r(t);R(e,t)},o.resetStatus=function(e){I(e)},_){var he=o,G=window.lazyLoadOptions;if(G)if(G.length)for(var Ee,Ie=0;Ee=G[Ie];Ie+=1)e(he,Ee);else e(he,G)}return o});