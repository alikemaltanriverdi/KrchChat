export default function(t){const r=SEMICOLON.Core;r.loadJS({file:"plugins.form.js",id:"canvas-form-js",jsFolder:!0}),r.isFuncTrue(()=>jQuery().validate&&jQuery().ajaxSubmit).then(e=>!!e&&(r.initFunction({class:"has-plugin-form",event:"pluginFormReady"}),(t=r.getSelector(t)).length<1||void t.each(function(){let e=jQuery(this),s=jQuery("body"),t=e.find("form"),a=t.attr("id"),i=e.attr("data-alert-type"),n=e.attr("data-loader"),o=e.find(".form-result"),l=e.attr("data-redirect"),u,c;i=i||"notify",a&&s.addClass(a+"-ready"),e.find("form").validate({errorPlacement:function(e,t){0<t.parents(".form-group").length?e.appendTo(t.parents(".form-group")):e.insertAfter(t)},focusCleanup:!0,submitHandler:function(r){if(e.hasClass("custom-submit"))return jQuery(r).submit(),!0;o.hide(),"button"==n?(u=jQuery(r).find("button"),defButtonText=u.html(),u.html('<i class="bi-arrow-repeat icon-spin m-0"></i>')):jQuery(r).find(".form-process").fadeIn(),a&&s.removeClass(a+"-ready "+a+"-complete "+a+"-success "+a+"-error").addClass(a+"-processing"),jQuery(r).ajaxSubmit({target:o,dataType:"json",success:function(e){if("button"==n?u.html(defButtonText):jQuery(r).find(".form-process").fadeOut(),"error"!=e.alert&&l)return window.location.replace(l),!0;var t;"inline"==i?(c="error"==e.alert?"alert-danger":"alert-success",o.removeClass("alert-danger alert-success").addClass("alert "+c).html(e.message).slideDown(400)):"notify"==i&&(o.attr("data-notify-type",e.alert).attr("data-notify-msg",e.message).html(""),SEMICOLON.Modules.notifications(o)),"error"!=e.alert?(jQuery(r).resetForm(),jQuery(r).find(".btn-group > .btn").removeClass("active"),"undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()&&tinymce.activeEditor.setContent(""),0<(t=jQuery(r).find(".input-range-slider")).length&&t.each(function(){jQuery(this).data("ionRangeSlider").reset()}),0<(t=jQuery(r).find(".input-rating")).length&&t.each(function(){jQuery(this).rating("reset")}),0<(t=jQuery(r).find(".selectpicker")).length&&t.each(function(){jQuery(this).selectpicker("val",""),jQuery(this).selectpicker("deselectAll")}),jQuery(r).find(".input-select2,select[data-selectsplitter-firstselect-selector]").change(),jQuery(r).trigger("formSubmitSuccess",e),s.removeClass(a+"-error").addClass(a+"-success")):(jQuery(r).trigger("formSubmitError",e),s.removeClass(a+"-success").addClass(a+"-error")),a&&s.removeClass(a+"-processing").addClass(a+"-complete"),0<jQuery(r).find(".g-recaptcha").children("div").length&&grecaptcha.reset()}})}})})))}